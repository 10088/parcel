//@flow strict-local

declare module 'module' {
  declare type FilePath = string;

  declare export default class Module {
    static _cache: {|[key: FilePath]: Module|};
    static _extensions: {
      [extension: string]: (module: Module, fileName: string) => void,
    };
    static _resolveFilename: (
      request: string,
      parent?: Module,
      ...args: Array<mixed>
    ) => string;
    static findPnpApi: (lookupSource: string) => PnpApi | null;
    id: string;
    path: FilePath;
    exports: {|[export: string]: mixed|};
    filename: string;
    loaded: boolean;
    children: Array<Module>;
    builtinModules: Array<string>;

    constructor(id: FilePath, parent: Module): Module;

    load(fileName: string): void;
    require: (request: string) => Module;
  }
}
